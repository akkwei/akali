(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-edit-edit"],{"4a16":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uButton:i("6258").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"edit"},[i("v-uni-view",{staticClass:"title"},[i("v-uni-input",{attrs:{type:"text",placeholder:"请输入一个完整的标题","placeholder-class":"placeholder-class"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-editor",{attrs:{id:"editor","show-img-size":!0,"show-img-toolbar":!0,"show-img-resize":!0,placeholder:"写点什么吧~~~"},on:{ready:function(e){arguments[0]=e=t.$handleEvent(e),t.editorReady.apply(void 0,arguments)},focus:function(e){arguments[0]=e=t.$handleEvent(e),t.editorFocus.apply(void 0,arguments)},statuschange:function(e){arguments[0]=e=t.$handleEvent(e),t.statuschange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"button-box"},[i("u-button",{attrs:{type:"primary",text:"确认发布",disabled:!t.form.title.length},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSubmit.apply(void 0,arguments)}}})],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.toolsShow,expression:"toolsShow"}],staticClass:"tools"},[i("v-uni-view",{staticClass:"tool",class:{active:t.headClassToggle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onHead.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-H-",staticStyle:{"font-size":"48rpx"}})],1),i("v-uni-view",{staticClass:"tool",class:{active:t.boldClassToggle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onBold.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-editor-bold"})],1),i("v-uni-view",{staticClass:"tool",class:{active:t.italicClassToggle},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onItalic.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-editor-italic"})],1),i("v-uni-view",{staticClass:"tool",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onDevider.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-line"})],1),i("v-uni-view",{staticClass:"tool",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.insertImage.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-image"})],1),i("v-uni-view",{staticClass:"tool",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onOk.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"iconfont icon-ok"})],1)],1)],1)},a=[]},"4c05":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */[data-v-24809c5c] .ql-blank::before{font-style:normal;color:#e0e0e0}.edit[data-v-24809c5c]{padding:0 %?30?%}.edit .title[data-v-24809c5c]{margin-bottom:%?30?%}.edit .title uni-input[data-v-24809c5c]{height:%?120?%;font-size:%?46?%;border-bottom:1px solid #e4e4e4;color:#333}.edit .title .placeholder-class[data-v-24809c5c]{color:#e0e0e0}.edit .content #editor[data-v-24809c5c]{height:calc(100vh - %?450?%);margin-bottom:%?20?%}.edit .tools[data-v-24809c5c]{display:flex;justify-content:space-around;height:%?100?%}.edit .tools .tool[data-v-24809c5c]{height:100%;line-height:%?100?%}.edit .tools .tool .iconfont[data-v-24809c5c]{font-size:%?36?%;color:#333}.edit .tools .tool.active .iconfont[data-v-24809c5c]{color:#0099f8}',""]),t.exports=e},"811c":function(t,e,i){"use strict";var n=i("c636"),o=i.n(n);o.a},"9b55":function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("5530")),a=n(i("c7eb")),s=n(i("1da1"));i("ac1f"),i("d81d"),i("baa5"),i("fb6a");var c=i("cd5d"),l=t.database(),r={data:function(){return{form:{title:"",content:"",desc:"",pic_urls:[],province:""},toolsShow:!1,headClassToggle:!1,boldClassToggle:!1,italicClassToggle:!1}},created:function(){var t=this;(0,c.getIp)().then((function(e){console.log("getIp res: ",e),t.form.province=e.province}))},methods:{editorReady:function(){var t=this;uni.createSelectorQuery().select("#editor").context((function(e){t.editorCtx=e.context})).exec()},editorFocus:function(){this.toolsShow=!0},statuschange:function(t){this.checkStatus("header",t.detail,"headClassToggle"),this.checkStatus("bold",t.detail,"boldClassToggle"),this.checkStatus("italic",t.detail,"italicClassToggle")},onDevider:function(){this.devideClassToggle=!this.devideClassToggle,this.editorCtx.insertDivider()},onHead:function(){this.headClassToggle=!this.headClassToggle,this.editorCtx.format("header",!!this.headClassToggle&&"H1")},onBold:function(){this.boldClassToggle=!this.boldClassToggle,this.editorCtx.format("bold")},onItalic:function(){this.italicClassToggle=!this.italicClassToggle,this.editorCtx.format("italic")},onOk:function(){this.toolsShow=!1},checkStatus:function(t,e,i){e.hasOwnProperty(t)?this[i]=!0:this[i]=!1},insertImage:function(){var e=this;uni.chooseImage({success:function(i){console.log("chooseImage res:::",i),uni.showLoading({title:"加载中……",mask:!0}),i.tempFiles.map(function(){var i=(0,s.default)((0,a.default)().mark((function i(n){var o,s,c;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return o=n.path.substring(n.path.lastIndexOf(".")),s=Date.now()+""+String(Math.random()).substring(3,6)+o,i.next=4,t.uploadFile({filePath:n.path,cloudPath:n.name||s});case 4:c=i.sent,e.editorCtx.insertImage({src:c.fileID});case 6:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}()),uni.hideLoading()}})},onSubmit:function(){var t=this;this.editorCtx.getContents({success:function(e){t.form.content=e.html,t.form.desc=e.text.slice(0,100),t.form.pic_urls=(0,c.extractImagePaths)(e.html),uni.showLoading({title:"发布中..."}),t.publishArticle()}})},publishArticle:function(){l.collection("quanzi-article").add((0,o.default)({},this.form)).then((function(t){0==t.result.code&&(uni.hideLoading(),uni.showToast({title:"发布成功"}),setTimeout((function(){uni.switchTab({url:"/pages/index/index"})}),800))}))}}};e.default=r}).call(this,i("a9ff")["default"])},c636:function(t,e,i){var n=i("4c05");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("7474277b",n,!0,{sourceMap:!1,shadowMode:!1})},cc07:function(t,e,i){"use strict";i.r(e);var n=i("4a16"),o=i("dcf7");for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);i("811c");var s=i("f0c5"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,"24809c5c",null,!1,n["a"],void 0);e["default"]=c.exports},dcf7:function(t,e,i){"use strict";i.r(e);var n=i("9b55"),o=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=o.a}}]);