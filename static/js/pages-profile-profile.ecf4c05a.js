(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-profile-profile"],{"04cc":function(t,e,n){"use strict";(function(t){n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("c7eb")),r=i(n("1da1")),o=n("7a0d"),s=t.database(),u={data:function(){return{statistics:{publish_total:0,getLike_total:0,getComment_total:0}}},computed:{hasLogin:function(){return o.store.hasLogin},userInfo:function(){return o.store.userInfo}},onShow:function(){this.hasLogin&&this.getStatistics()},methods:{getStatistics:function(){var t=this;return(0,r.default)((0,a.default)().mark((function e(){var n,i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.collection("quanzi-article").where("user_id==$cloudEnv_uid").groupBy("user_id").groupField("sum(like_count) as like_total").get();case 2:return n=e.sent,e.next=5,s.collection("quanzi-article").where("user_id==$cloudEnv_uid").count();case 5:i=e.sent,n.result.data.length&&(t.statistics.getLike_total=n.result.data[0].like_total),t.statistics.publish_total=i.result.total;case 8:case"end":return e.stop()}}),e)})))()},goArticleList:function(){uni.navigateTo({url:"/pages/quanzi-article/list"})},goLikeList:function(){uni.navigateTo({url:"/pages/quanzi_like/list"})},goCommentList:function(){uni.navigateTo({url:"/pages/quanzi-comment/list"})},goFeedback:function(){uni.navigateTo({url:"/uni_modules/uni-feedback/pages/opendb-feedback/opendb-feedback"})},logout:function(){uni.showModal({title:"确认退出登录？",success:function(t){t.confirm&&o.mutations.logout()}})},onClickTop:function(){if(this.hasLogin)uni.navigateTo({url:"/pages/user-profile/user-profile?id="+t.getCurrentUserInfo().uid});else{var e=this.$mp.page.route;uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd?uniIdRedirectUrl=/"+e})}}}};e.default=u}).call(this,n("a9ff")["default"])},1078:function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("a9e3"),n("e25e");var i=n("e2d5"),a={name:"uniDateformat",props:{date:{type:[Object,String,Number],default:function(){return"-"}},locale:{type:String,default:"zh"},threshold:{type:Array,default:function(){return[0,0]}},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:function(){return{refreshMark:0}},computed:{dateShow:function(){return this.refreshMark,(0,i.friendlyDate)(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler:function(){this.setAutoRefresh()},immediate:!0}},methods:{refresh:function(){this.refreshMark++},setAutoRefresh:function(){var t=this;clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((function(){t.refresh()}),parseInt(this.refreshRate)))}}};e.default=a},"21b4":function(t,e,n){"use strict";n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={debug:!1,isAdmin:!1,loginTypes:["weixin","username","smsCode"],agreements:{serviceUrl:"https://xxx",privacyUrl:"https://xxx",scope:["register","login","realNameVerify"]},appid:{weixin:{h5:"xxxxxx",web:"xxxxxx"}},passwordStrength:"medium",setPasswordAfterLogin:!1}},"2c5c":function(t,e,n){"use strict";n.r(e);var i=n("d434"),a=n("ef2f");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);n("ee32");var o=n("f0c5"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"5f7222d6",null,!1,i["a"],void 0);e["default"]=s.exports},"453e":function(t,e,n){"use strict";n.r(e);var i=n("5583"),a=n("bcc0");for(var r in a)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var o=n("f0c5"),s=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"690ab064",null,!1,i["a"],void 0);e["default"]=s.exports},"4b6a":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.profile .top[data-v-5f7222d6]{height:%?300?%;padding:0 %?30?%;padding-top:0;position:relative;display:flex;align-items:center}.profile .top .group[data-v-5f7222d6]{width:100%;display:flex;justify-content:space-between;align-items:center;color:#333;z-index:99}.profile .top .group .userinfo[data-v-5f7222d6]{display:flex;align-items:center;width:100%}.profile .top .group .userinfo .avatar[data-v-5f7222d6]{margin-right:%?18?%}.profile .top .group .userinfo .avatar uni-image[data-v-5f7222d6]{width:%?60?%;height:%?60?%;border-radius:50%}.profile .top .atmosphere-bg[data-v-5f7222d6]{width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden}.profile .top .atmosphere-bg uni-image[data-v-5f7222d6]{width:100%;height:100%;-webkit-filter:blur(20px);filter:blur(20px);-webkit-transform:scale(1);transform:scale(1);opacity:.5}.profile .main[data-v-5f7222d6]{position:relative;background-color:#fff;border-radius:%?30?%;-webkit-transform:translateY(%?-30?%);transform:translateY(%?-30?%)}.profile .main .info[data-v-5f7222d6]{display:flex;font-size:%?26?%;padding:%?30?%}.profile .main .info uni-view[data-v-5f7222d6]{margin-right:%?10?%;color:#777}.profile .main .info uni-view uni-text[data-v-5f7222d6]{color:#333;font-weight:700}.profile .main .group[data-v-5f7222d6]{border-bottom:%?10?% solid #f5f5f5;color:#666;padding:0 %?30?%}.profile .main .group .item[data-v-5f7222d6]{padding:%?25?% 0;display:flex;justify-content:space-between;align-items:center}.profile .main .group .item .left .iconfont[data-v-5f7222d6]{margin-right:%?6?%}.profile .main .group[data-v-5f7222d6]:last-child{border:none}',""]),t.exports=e},5583:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-text",[this._v(this._s(this.dateShow))])},a=[]},"6c7b":function(t,e,n){var i=n("4b6a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("4e4ada68",i,!0,{sourceMap:!1,shadowMode:!1})},"7a0d":function(t,e,n){"use strict";(function(t){n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.store=e.mutations=void 0;var a=i(n("c7eb")),r=i(n("5530")),o=i(n("1da1"));n("b64b"),n("d3b7"),n("159b"),n("99af");var s=i(n("7ca7")),u=i(n("21b4")),c=i(n("e143")),l=t.importObject("uni-id-co"),f=t.database(),d=f.collection("uni-id-users"),v=uni.getStorageSync("uni-id-pages-userInfo")||{},p=function(){return!!(t.getCurrentUserInfo().tokenExpired&&t.getCurrentUserInfo().tokenExpired<Date.now())},h={ifTokenExpire:p(),userInfo:v,hasLogin:0!=Object.keys(v).length&&!p()},g={updateUserInfo:function(){var e=arguments,n=this;return(0,o.default)((0,a.default)().mark((function i(){var o,s,u,c;return(0,a.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(o=e.length>0&&void 0!==e[0]&&e[0],!o){i.next=5;break}d.where("_id==$env.uid").update(o).then((function(t){t.result.updated?(uni.showToast({title:"更新成功",icon:"none",duration:3e3}),n.setUserInfo(o)):uni.showToast({title:"没有改变",icon:"none",duration:3e3})})),i.next=20;break;case 5:return s=t.importObject("uni-id-co",{customUI:!0}),i.prev=6,i.next=9,d.where("'_id' == $cloudEnv_uid").field("mobile,nickname,username,email,avatar_file,profile_bg,register_date").get();case 9:return u=i.sent,i.next=12,s.getRealNameInfo();case 12:c=i.sent,n.setUserInfo((0,r.default)((0,r.default)({},u.result.data[0]),{},{realNameAuth:c})),i.next=20;break;case 16:i.prev=16,i.t0=i["catch"](6),n.setUserInfo({},{cover:!0}),console.error(i.t0.message,i.t0.errCode);case 20:case"end":return i.stop()}}),i,null,[[6,16]])})))()},setUserInfo:function(t){var e=arguments;return(0,o.default)((0,a.default)().mark((function n(){var i,r,o;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.length>1&&void 0!==e[1]?e[1]:{cover:!1},r=i.cover,o=r?t:Object.assign(m.userInfo,t),m.userInfo=Object.assign({},o),m.hasLogin=0!=Object.keys(m.userInfo).length&&!p(),uni.setStorageSync("uni-id-pages-userInfo",m.userInfo),n.abrupt("return",t);case 6:case"end":return n.stop()}}),n)})))()},logout:function(){var e=this;return(0,o.default)((0,a.default)().mark((function n(){return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(t.getCurrentUserInfo().tokenExpired>Date.now())){n.next=9;break}return n.prev=1,n.next=4,l.logout();case 4:n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](1),console.error(n.t0);case 9:uni.removeStorageSync("uni_id_token"),uni.setStorageSync("uni_id_token_expired",0),uni.reLaunch({url:"/pages/profile/profile"}),uni.$emit("uni-id-pages-logout"),e.setUserInfo({},{cover:!0});case 14:case"end":return n.stop()}}),n,null,[[1,6]])})))()},loginBack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("loginBack参数:::",t);var e=t.uniIdRedirectUrl,n=void 0===e?"":e,i=0,a=getCurrentPages();if(a.forEach((function(t,e){"login"==a[a.length-e-1].route.split("/")[3]&&i++})),n)return uni.redirectTo({url:n,fail:function(t){uni.switchTab({url:n,fail:function(e){console.log(t,e)}})}});if("weixin"==t.loginType)return window.history.go(-3);if(i){var r=s.default.pages[0];return console.log("if (delta) ",r),uni.reLaunch({url:"/".concat(r.path)})}uni.navigateBack({delta:i})},loginSuccess:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("loginSuccess参数:::",t);var e=t.showToast,n=void 0===e||e,i=t.toastText,a=void 0===i?"登录成功":i,r=t.autoBack,o=void 0===r||r,s=t.uniIdRedirectUrl,c=void 0===s?"":s,l=t.passwordConfirmed;if(n&&uni.showToast({title:a,icon:"none",duration:3e3}),this.updateUserInfo(),uni.$emit("uni-id-pages-login-success"),u.default.setPasswordAfterLogin&&!l)return uni.redirectTo({url:c?"/uni_modules/uni-id-pages/pages/userinfo/set-pwd/set-pwd?uniIdRedirectUrl=".concat(c,"&loginType=").concat(t.loginType):"/uni_modules/uni-id-pages/pages/userinfo/set-pwd/set-pwd?loginType=".concat(t.loginType),fail:function(t){console.log(t)}});m.ifTokenExpire=p(),m.hasLogin=p(),console.log("登录成功后store: ",m),o&&this.loginBack({uniIdRedirectUrl:c})}};e.mutations=g;var m=c.default.observable(h);e.store=m}).call(this,n("a9ff")["default"])},bcc0:function(t,e,n){"use strict";n.r(e);var i=n("1078"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},d434:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var i={uniDateformat:n("453e").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"profile"},[i("v-uni-view",{staticClass:"top"},[i("v-uni-view",{staticClass:"group",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClickTop.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"userinfo"},[i("v-uni-view",{staticClass:"avatar"},[t.hasLogin&&t.userInfo.avatar_file&&t.userInfo.avatar_file.url?i("v-uni-image",{attrs:{src:t.userInfo.avatar_file.url,mode:"aspectFill"}}):i("v-uni-image",{attrs:{src:n("e590"),mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"info"},[t.hasLogin?i("v-uni-view",{staticClass:"nickname"},[t._v(t._s(t.userInfo.nickname||t.userInfo.username||"暂无昵称"))]):i("v-uni-view",{staticClass:"nickname"},[t._v("去登录")]),t.hasLogin?i("v-uni-view",{staticClass:"reg"},[i("uni-dateformat",{attrs:{date:t.userInfo.register_date,threshold:[6e4,3079296e6]}}),t._v("注册")],1):t._e()],1)],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"iconfont icon-right"})],1)],1),t.hasLogin&&t.userInfo.avatar_file&&t.userInfo.avatar_file.url?i("v-uni-view",{staticClass:"atmosphere-bg"},[i("v-uni-image",{attrs:{src:t.userInfo.avatar_file.url,mode:"aspectFill"}})],1):i("v-uni-view",{staticClass:"atmosphere-bg"},[i("v-uni-image",{attrs:{src:n("e590"),mode:"aspectFill"}})],1)],1),i("v-uni-view",{staticClass:"main"},[t.hasLogin?i("v-uni-view",{staticClass:"info"},[i("v-uni-view",[i("v-uni-text",[t._v(t._s(t.statistics.getLike_total))]),t._v("获赞")],1),i("v-uni-view",[i("v-uni-text",[t._v(t._s(t.statistics.getComment_total))]),t._v("评论")],1),i("v-uni-view",[i("v-uni-text",[t._v(t._s(t.statistics.publish_total))]),t._v("发文")],1)],1):t._e(),i("v-uni-view",{staticClass:"group"},[i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goArticleList.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"iconfont icon-container"}),i("v-uni-text",[t._v("我的长文")])],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"iconfont icon-right"})],1)],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goLikeList.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"iconfont icon-like"}),i("v-uni-text",[t._v("我的点赞")])],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"iconfont icon-right"})],1)],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goCommentList.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"iconfont icon-edit"}),i("v-uni-text",[t._v("我的评论")])],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"iconfont icon-right"})],1)],1)],1),i("v-uni-view",{staticClass:"group"},[i("v-uni-view",{staticClass:"item"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"iconfont icon-file-text"}),i("v-uni-text",[t._v("关于")])],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"iconfont icon-right"})],1)],1),i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goFeedback.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"iconfont icon-message"}),i("v-uni-text",[t._v("意见反馈")])],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"iconfont icon-right"})],1)],1)],1),t.hasLogin?i("v-uni-view",{staticClass:"group"},[i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.logout.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"left"},[i("v-uni-text",{staticClass:"iconfont icon-poweroff"}),i("v-uni-text",[t._v("退出登录")])],1),i("v-uni-view",{staticClass:"right"},[i("v-uni-text",{staticClass:"iconfont icon-right"})],1)],1)],1):t._e()],1)],1)},r=[]},e2d5:function(t,e,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=u,e.friendlyDate=function(t,e){var n=e.locale,i=void 0===n?"zh":n,a=e.threshold,r=void 0===a?[6e4,36e5]:a,o=e.format,c=void 0===o?"yyyy/MM/dd hh:mm:ss":o;if("-"===t)return t;if(!t&&0!==t)return"";var l,f,d={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},v=d[i]||d.zh,p=s(t),h=p.getTime()-Date.now(),g=Math.abs(h);if(g<r[0])return h<0?v.justNow:v.soon;if(g>=r[1])return u(p,c);var m=v.later;h<0&&(m=v.ago,h=-h);var w=Math.floor(h/1e3),b=Math.floor(w/60),x=Math.floor(b/60),y=Math.floor(x/24),_=Math.floor(y/30),k=Math.floor(_/12);switch(!0){case k>0:l=k,f=v.year;break;case _>0:l=_,f=v.month;break;case y>0:l=y,f=v.day;break;case x>0:l=x,f=v.hour;break;case b>0:l=b,f=v.minute;break;default:l=w,f=v.second;break}"en"===i&&(1===l?l="a":f+="s");return v.template.replace(/{\s*num\s*}/g,l+"").replace(/{\s*unit\s*}/g,f).replace(/{\s*suffix\s*}/g,m)};var a=i(n("53ca"));function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t+="";while(t.length<e)t="0"+t;return t.slice(-e)}n("fb6a"),n("c975"),n("ac1f"),n("5319");var o={yyyy:function(t){return r(t.year,4)},yy:function(t){return r(t.year)},MM:function(t){return r(t.month)},M:function(t){return t.month},dd:function(t){return r(t.day)},d:function(t){return t.day},hh:function(t){return r(t.hour)},h:function(t){return t.hour},mm:function(t){return r(t.minute)},m:function(t){return t.minute},ss:function(t){return r(t.second)},s:function(t){return t.second},SSS:function(t){return r(t.millisecond,3)},S:function(t){return t.millisecond}};function s(t){if(t instanceof Date)return t;switch((0,a.default)(t)){case"string":return t.indexOf("T")>-1?new Date(t):new Date(t.replace(/-/g,"/"));default:return new Date(t)}}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd hh:mm:ss";if(!t&&0!==t)return"";t=s(t);var n={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()},i=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/,a=!0,r=e;while(a)a=!1,r=r.replace(i,(function(t){return a=!0,o[t](n)}));return r}},e590:function(t,e,n){t.exports=n.p+"static/img/avatar_default.e8bd4bd1.png"},ee32:function(t,e,n){"use strict";var i=n("6c7b"),a=n.n(i);a.a},ef2f:function(t,e,n){"use strict";n.r(e);var i=n("04cc"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a}}]);