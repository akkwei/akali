(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-quanzi-comment-list"],{"051d":function(e,t,n){var i=n("61a4");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("54577013",i,!0,{sourceMap:!1,shadowMode:!1})},"0fdc":function(e,t,n){"use strict";n.r(t);var i=n("1aff"),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},1078:function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("a9e3"),n("e25e");var i=n("e2d5"),r={name:"uniDateformat",props:{date:{type:[Object,String,Number],default:function(){return"-"}},locale:{type:String,default:"zh"},threshold:{type:Array,default:function(){return[0,0]}},format:{type:String,default:"yyyy/MM/dd hh:mm:ss"},refreshRate:{type:[Number,String],default:0}},data:function(){return{refreshMark:0}},computed:{dateShow:function(){return this.refreshMark,(0,i.friendlyDate)(this.date,{locale:this.locale,threshold:this.threshold,format:this.format})}},watch:{refreshRate:{handler:function(){this.setAutoRefresh()},immediate:!0}},methods:{refresh:function(){this.refreshMark++},setAutoRefresh:function(){var e=this;clearInterval(this.refreshInterval),this.refreshRate&&(this.refreshInterval=setInterval((function(){e.refresh()}),parseInt(this.refreshRate)))}}};t.default=r},"1aff":function(e,t,n){"use strict";(function(e){n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=e.database(),r={data:function(){return{collectionList:[i.collection("quanzi-comment").where("user_id==$cloudEnv_uid && comment_type == 0").getTemp(),i.collection("quanzi-article").field("_id,title,pic_urls").getTemp(),i.collection("uni-id-users").field("_id,username,nickname,avatar_file").getTemp()],loadMore:{contentdown:"",contentrefresh:"",contentnomore:""}}},onPullDownRefresh:function(){this.$refs.udb.loadData({clear:!0},(function(){uni.stopPullDownRefresh()}))},onReachBottom:function(){this.$refs.udb.loadMore()},methods:{handleLoad:function(e,t,n){},refreshCommentList:function(){this.$refs.udb.refresh()},handleItemClick:function(e){uni.navigateTo({url:"/pages/detail/detail?id="+e})},fabClick:function(){var e=this;uni.navigateTo({url:"./add",events:{refreshData:function(){e.$refs.udb.loadData({clear:!0})}}})}}};t.default=r}).call(this,n("a9ff")["default"])},"21b4":function(e,t,n){"use strict";n("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={debug:!1,isAdmin:!1,loginTypes:["weixin","username","smsCode"],agreements:{serviceUrl:"https://xxx",privacyUrl:"https://xxx",scope:["register","login","realNameVerify"]},appid:{weixin:{h5:"xxxxxx",web:"xxxxxx"}},passwordStrength:"medium",setPasswordAfterLogin:!1}},"356b":function(e,t,n){"use strict";var i=n("051d"),r=n.n(i);r.a},"453e":function(e,t,n){"use strict";n.r(t);var i=n("5583"),r=n("bcc0");for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var a=n("f0c5"),u=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"690ab064",null,!1,i["a"],void 0);t["default"]=u.exports},"536e":function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("5530")),o=n("cd5d"),a=n("7a0d"),u=e.database(),c={name:"user-comment",props:{item:{type:Object,default:function(){return{}}},ifLast:Boolean},data:function(){return{ifLiked:!1}},computed:{hasLogin:function(){return a.store.hasLogin},userInfo:function(){return a.store.userInfo}},created:function(){this.hasLogin&&this.userIfLiked()},methods:{getName:o.getName,getAvatar:o.getAvatar,userIfLiked:function(){var t=this,n=e.getCurrentUserInfo().uid;u.collection("quanzi_like_comment").where({user_id:n,comment_id:this.item._id}).count().then((function(e){e.result.total&&(t.ifLiked=!0)}))},likeComment:function(){this.hasLogin?(this.ifLiked?this.item.like_count--:this.item.like_count++,this.ifLiked=!this.ifLiked,(0,o.handleLikeComment)(this.item._id)):(0,o.needAuth)()},goUserProfile:function(){uni.navigateTo({url:"/pages/user-profile/user-profile?id="+this.item.user_id[0]._id})},goArticleDetail:function(){uni.navigateTo({url:"/pages/detail/detail?id="+this.item.article_id[0]._id})},goCommentDetail:function(){var e=(0,r.default)((0,r.default)({},this.item),{},{article_id:this.item.article_id[0]._id});uni.setStorageSync("commentItem",e),uni.navigateTo({url:"/pages/comment-detail/comment-detail"})}}};t.default=c}).call(this,n("a9ff")["default"])},5583:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){}));var i=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-text",[this._v(this._s(this.dateShow))])},r=[]},"61a4":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.user-comment[data-v-566c4cd0]{border-bottom:%?2?% solid #eee;padding:0 %?20?%;padding-top:%?10?%;box-sizing:border-box}.user-comment .userinfo[data-v-566c4cd0]{display:flex;align-items:center}.user-comment .userinfo .avatar[data-v-566c4cd0]{margin-right:%?18?%}.user-comment .userinfo .avatar uni-image[data-v-566c4cd0]{width:%?60?%;height:%?60?%;border-radius:50%}.user-comment .userinfo .info[data-v-566c4cd0]{flex:1}.user-comment .userinfo .info .name[data-v-566c4cd0]{font-size:%?28?%}.user-comment .userinfo .info .time[data-v-566c4cd0]{color:#999;font-size:%?24?%}.user-comment .content[data-v-566c4cd0]{margin:%?10?% 0}.user-comment .article[data-v-566c4cd0]{background-color:#f7f8fa;display:flex;align-items:center;height:%?90?%;font-size:%?24?%}.user-comment .article .article-poster[data-v-566c4cd0]{width:%?90?%;height:%?90?%}.user-comment .article .article-poster uni-image[data-v-566c4cd0]{width:%?90?%;height:%?90?%}.user-comment .article .article-content[data-v-566c4cd0]{padding:%?10?% %?20?%;color:#999;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:2}.user-comment .operate[data-v-566c4cd0]{display:flex;align-items:center;justify-content:space-between;margin:%?20?% 0}.user-comment .operate > uni-view[data-v-566c4cd0]{flex:1;font-size:%?24?%;color:#666;display:flex;align-items:center;justify-content:center}.user-comment .operate > uni-view .iconfont[data-v-566c4cd0]{margin-right:%?6?%}.user-comment .operate .like.active[data-v-566c4cd0]{color:#ee2147}',""]),e.exports=t},"7a0d":function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.store=t.mutations=void 0;var r=i(n("c7eb")),o=i(n("5530")),a=i(n("1da1"));n("b64b"),n("d3b7"),n("159b"),n("99af");var u=i(n("7ca7")),c=i(n("21b4")),s=i(n("e143")),l=e.importObject("uni-id-co"),d=e.database(),f=d.collection("uni-id-users"),m=uni.getStorageSync("uni-id-pages-userInfo")||{},v=function(){return!!(e.getCurrentUserInfo().tokenExpired&&e.getCurrentUserInfo().tokenExpired<Date.now())},h={ifTokenExpire:v(),userInfo:m,hasLogin:0!=Object.keys(m).length&&!v()},p={updateUserInfo:function(){var t=arguments,n=this;return(0,a.default)((0,r.default)().mark((function i(){var a,u,c,s;return(0,r.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=t.length>0&&void 0!==t[0]&&t[0],!a){i.next=5;break}f.where("_id==$env.uid").update(a).then((function(e){e.result.updated?(uni.showToast({title:"更新成功",icon:"none",duration:3e3}),n.setUserInfo(a)):uni.showToast({title:"没有改变",icon:"none",duration:3e3})})),i.next=20;break;case 5:return u=e.importObject("uni-id-co",{customUI:!0}),i.prev=6,i.next=9,f.where("'_id' == $cloudEnv_uid").field("mobile,nickname,username,email,avatar_file,profile_bg,register_date").get();case 9:return c=i.sent,i.next=12,u.getRealNameInfo();case 12:s=i.sent,n.setUserInfo((0,o.default)((0,o.default)({},c.result.data[0]),{},{realNameAuth:s})),i.next=20;break;case 16:i.prev=16,i.t0=i["catch"](6),n.setUserInfo({},{cover:!0}),console.error(i.t0.message,i.t0.errCode);case 20:case"end":return i.stop()}}),i,null,[[6,16]])})))()},setUserInfo:function(e){var t=arguments;return(0,a.default)((0,r.default)().mark((function n(){var i,o,a;return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:{cover:!1},o=i.cover,a=o?e:Object.assign(g.userInfo,e),g.userInfo=Object.assign({},a),g.hasLogin=0!=Object.keys(g.userInfo).length&&!v(),uni.setStorageSync("uni-id-pages-userInfo",g.userInfo),n.abrupt("return",e);case 6:case"end":return n.stop()}}),n)})))()},logout:function(){var t=this;return(0,a.default)((0,r.default)().mark((function n(){return(0,r.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e.getCurrentUserInfo().tokenExpired>Date.now())){n.next=9;break}return n.prev=1,n.next=4,l.logout();case 4:n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](1),console.error(n.t0);case 9:uni.removeStorageSync("uni_id_token"),uni.setStorageSync("uni_id_token_expired",0),uni.reLaunch({url:"/pages/profile/profile"}),uni.$emit("uni-id-pages-logout"),t.setUserInfo({},{cover:!0});case 14:case"end":return n.stop()}}),n,null,[[1,6]])})))()},loginBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("loginBack参数:::",e);var t=e.uniIdRedirectUrl,n=void 0===t?"":t,i=0,r=getCurrentPages();if(r.forEach((function(e,t){"login"==r[r.length-t-1].route.split("/")[3]&&i++})),n)return uni.redirectTo({url:n,fail:function(e){uni.switchTab({url:n,fail:function(t){console.log(e,t)}})}});if("weixin"==e.loginType)return window.history.go(-3);if(i){var o=u.default.pages[0];return console.log("if (delta) ",o),uni.reLaunch({url:"/".concat(o.path)})}uni.navigateBack({delta:i})},loginSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("loginSuccess参数:::",e);var t=e.showToast,n=void 0===t||t,i=e.toastText,r=void 0===i?"登录成功":i,o=e.autoBack,a=void 0===o||o,u=e.uniIdRedirectUrl,s=void 0===u?"":u,l=e.passwordConfirmed;if(n&&uni.showToast({title:r,icon:"none",duration:3e3}),this.updateUserInfo(),uni.$emit("uni-id-pages-login-success"),c.default.setPasswordAfterLogin&&!l)return uni.redirectTo({url:s?"/uni_modules/uni-id-pages/pages/userinfo/set-pwd/set-pwd?uniIdRedirectUrl=".concat(s,"&loginType=").concat(e.loginType):"/uni_modules/uni-id-pages/pages/userinfo/set-pwd/set-pwd?loginType=".concat(e.loginType),fail:function(e){console.log(e)}});g.ifTokenExpire=v(),g.hasLogin=v(),console.log("登录成功后store: ",g),a&&this.loginBack({uniIdRedirectUrl:s})}};t.mutations=p;var g=s.default.observable(h);t.store=g}).call(this,n("a9ff")["default"])},8704:function(e,t,n){"use strict";n.r(t);var i=n("d182"),r=n("bf3c");for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("356b");var a=n("f0c5"),u=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"566c4cd0",null,!1,i["a"],void 0);t["default"]=u.exports},"9d2b":function(e,t,n){"use strict";n.r(t);var i=n("d0e0"),r=n("0fdc");for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var a=n("f0c5"),u=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"cf558652",null,!1,i["a"],void 0);t["default"]=u.exports},bcc0:function(e,t,n){"use strict";n.r(t);var i=n("1078"),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},bf3c:function(e,t,n){"use strict";n.r(t);var i=n("536e"),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},cd5d:function(e,t,n){"use strict";(function(e){n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t){var n=null;return function(){n&&clearTimeout(n),console.log("fn: ",e),n=setTimeout(e,t)}},t.deleteDB=function(e){s.collection(e).where({_id:s.command.neq(-1)}).remove().then((function(e){console.log("deleteDBres: ",e)})).catch((function(e){console.log("e: ",e)}))},t.extractImagePaths=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=/<img[^>]+src="?([^"\s]+)"?/g,r=[];while(null!==(t=i.exec(e)))r.push(t[1]);r.length>3&&(r=r.slice(0,n));return r},t.getAvatar=function(e){var t,n,i;return e.user_id.length&&null!==(t=null===(n=e.user_id[0])||void 0===n||null===(i=n.avatar_file)||void 0===i?void 0:i.url)&&void 0!==t?t:"../../static/imgs/avatar_default.png"},t.getIp=function(){return new Promise((function(e,t){var n=uni.getStorageSync("IPcache");n?Date.now()-n.timestamp>36e5?a().then((function(t){e(t)})).catch((function(e){t(e)})):e(n):a().then((function(t){e(t)})).catch((function(e){t(e)}))}))},t.getName=function(e){return e.user_id[0].nickname||e.user_id[0].username||e.user_id[0].mobile||"暂无昵称"},t.handleLike=function(e){return l.apply(this,arguments)},t.handleLikeComment=function(e){return d.apply(this,arguments)},t.needAuth=function(){uni.showToast({title:"请登录后再试",icon:"none"}),setTimeout((function(){uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})}),800)},t.trottle=function(e,t){var n=null;return function(){n||(n=setTimeout((function(){e(),n=null}),t))}};var r=i(n("c7eb")),o=i(n("1da1"));function a(){return new Promise((function(e,t){uni.request({url:"https://restapi.amap.com/v3/ip?key=146b52c324a77d4a2154d5de5cf7087f",success:function(t){console.log("queryIp: ",t);var n="string"==typeof t.data.province?t.data.province:"IP未知",i={province:n,timestamp:Date.now()};uni.setStorageSync("IPcache",i),e(i)},fail:function(e){t(e)}})}))}n("ac1f"),n("14d9"),n("fb6a"),n("d3b7");var u=e.importObject("utils"),c=u.countUpdate,s=e.database();s.command;function l(){return l=(0,o.default)((0,r.default)().mark((function t(n){var i;return(0,r.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.collection("quanzi_like").where("user_id==$cloudEnv_uid && article_id=='".concat(n,"'")).count();case 2:i=t.sent,i=i.result.total,console.log("count: ",i),i?(console.log("remove------------------------"),s.collection("quanzi_like").where("user_id==$cloudEnv_uid && article_id=='".concat(n,"'")).remove(),c("quanzi-article",n,"like_count",-1)):(console.log("add------------------------"),s.collection("quanzi_like").add({user_id:e.getCurrentUserInfo().uid,article_id:n}),c("quanzi-article",n,"like_count",1));case 6:case"end":return t.stop()}}),t)}))),l.apply(this,arguments)}function d(){return d=(0,o.default)((0,r.default)().mark((function e(t){var n;return(0,r.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.collection("quanzi_like_comment").where("user_id==$cloudEnv_uid && comment_id=='".concat(t,"'")).count();case 2:n=e.sent,n=n.result.total,n?(s.collection("quanzi_like_comment").where("user_id==$cloudEnv_uid && comment_id=='".concat(t,"'")).remove(),c("quanzi-comment",t,"like_count",-1)):(s.collection("quanzi_like_comment").add({comment_id:t}),c("quanzi-comment",t,"like_count",1));case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}}).call(this,n("a9ff")["default"])},d0e0:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={unicloudDb:n("960d").default,userComment:n("8704").default,uniLoadMore:n("2a97").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"container"},[n("unicloud-db",{ref:"udb",attrs:{collection:e.collectionList,field:"article_id,user_id,comment_content,like_count,comment_type,reply_user_id,reply_comment_id,comment_date,comment_ip,province,reply_count"},on:{load:function(t){arguments[0]=t=e.$handleEvent(t),e.handleLoad.apply(void 0,arguments)}},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.data,r=(t.pagination,t.loading),o=t.hasMore,a=t.error;return[a?n("v-uni-view",[e._v(e._s(a.message))]):i?[e._l(i,(function(t,r){return[n("user-comment",{key:t._id,attrs:{item:t,ifLast:r==i.length-1},on:{refreshCommentList:function(t){arguments[0]=t=e.$handleEvent(t),e.refreshCommentList.apply(void 0,arguments)}}})]}))]:e._e(),n("uni-load-more",{attrs:{status:r?"loading":o?"more":"noMore"}})]}}])})],1)},o=[]},d182:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uniDateformat:n("453e").default},r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"user-comment",style:{borderBottom:e.ifLast?"none":"2rpx solid #eee"}},[n("v-uni-view",{staticClass:"userinfo"},[n("v-uni-view",{staticClass:"avatar",on:{click:function(t){t.stopPropagation(),arguments[0]=t=e.$handleEvent(t),e.goUserProfile.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:e.getAvatar(e.item),mode:"aspectFill"}})],1),n("v-uni-view",{staticClass:"info",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goCommentDetail.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"name"},[e._v(e._s(e.getName(e.item)))]),n("v-uni-view",{staticClass:"time"},[n("uni-dateformat",{attrs:{date:e.item.comment_date,threshold:[18e4,864e5],format:"MM/dd"}})],1)],1)],1),n("v-uni-view",{staticClass:"content",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goCommentDetail.apply(void 0,arguments)}}},[e._v(e._s(e.item.comment_content))]),n("v-uni-view",{staticClass:"article",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goArticleDetail.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"article-poster"},[n("v-uni-image",{attrs:{src:e.item.article_id[0].pic_urls[0],mode:"aspectFill"}})],1),n("v-uni-view",{staticClass:"article-content"},[e._v(e._s(e.item.article_id[0].title))])],1),n("v-uni-view",{staticClass:"operate"},[n("v-uni-view",{staticClass:"share"},[n("v-uni-text",{staticClass:"iconfont icon-share1"}),n("v-uni-text",{staticClass:"comment-count"},[e._v("分享")])],1),n("v-uni-view",{staticClass:"comment",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goCommentDetail.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-comment1"}),n("v-uni-text",{staticClass:"comment-count"},[e._v(e._s(e.item.reply_count||"评论"))])],1),n("v-uni-view",{staticClass:"like",class:e.ifLiked?"active":"",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.likeComment.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"iconfont icon-good"}),n("v-uni-text",{staticClass:"like-count"},[e._v(e._s(e.item.like_count||"点赞"))])],1)],1)],1)},o=[]},e2d5:function(e,t,n){"use strict";n("7a82");var i=n("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=c,t.friendlyDate=function(e,t){var n=t.locale,i=void 0===n?"zh":n,r=t.threshold,o=void 0===r?[6e4,36e5]:r,a=t.format,s=void 0===a?"yyyy/MM/dd hh:mm:ss":a;if("-"===e)return e;if(!e&&0!==e)return"";var l,d,f={zh:{year:"年",month:"月",day:"天",hour:"小时",minute:"分钟",second:"秒",ago:"前",later:"后",justNow:"刚刚",soon:"马上",template:"{num}{unit}{suffix}"},en:{year:"year",month:"month",day:"day",hour:"hour",minute:"minute",second:"second",ago:"ago",later:"later",justNow:"just now",soon:"soon",template:"{num} {unit} {suffix}"}},m=f[i]||f.zh,v=u(e),h=v.getTime()-Date.now(),p=Math.abs(h);if(p<o[0])return h<0?m.justNow:m.soon;if(p>=o[1])return c(v,s);var g=m.later;h<0&&(g=m.ago,h=-h);var _=Math.floor(h/1e3),w=Math.floor(_/60),y=Math.floor(w/60),b=Math.floor(y/24),k=Math.floor(b/30),x=Math.floor(k/12);switch(!0){case x>0:l=x,d=m.year;break;case k>0:l=k,d=m.month;break;case b>0:l=b,d=m.day;break;case y>0:l=y,d=m.hour;break;case w>0:l=w,d=m.minute;break;default:l=_,d=m.second;break}"en"===i&&(1===l?l="a":d+="s");return m.template.replace(/{\s*num\s*}/g,l+"").replace(/{\s*unit\s*}/g,d).replace(/{\s*suffix\s*}/g,g)};var r=i(n("53ca"));function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e+="";while(e.length<t)e="0"+e;return e.slice(-t)}n("fb6a"),n("c975"),n("ac1f"),n("5319");var a={yyyy:function(e){return o(e.year,4)},yy:function(e){return o(e.year)},MM:function(e){return o(e.month)},M:function(e){return e.month},dd:function(e){return o(e.day)},d:function(e){return e.day},hh:function(e){return o(e.hour)},h:function(e){return e.hour},mm:function(e){return o(e.minute)},m:function(e){return e.minute},ss:function(e){return o(e.second)},s:function(e){return e.second},SSS:function(e){return o(e.millisecond,3)},S:function(e){return e.millisecond}};function u(e){if(e instanceof Date)return e;switch((0,r.default)(e)){case"string":return e.indexOf("T")>-1?new Date(e):new Date(e.replace(/-/g,"/"));default:return new Date(e)}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy/MM/dd hh:mm:ss";if(!e&&0!==e)return"";e=u(e);var n={year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()},i=/yyyy|yy|MM|M|dd|d|hh|h|mm|m|ss|s|SSS|SS|S/,r=!0,o=t;while(r)r=!1,o=o.replace(i,(function(e){return r=!0,a[e](n)}));return o}}}]);